<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/historico.css">
    <title>Historico de transações</title>
</head>
<body>
    <div id="historicoTransacoes">
        <section class="conta">
            <p class="poupanca">$ <span class="total"> 9,000 </span><br><span>Poupança</span></p>

        <ul class="history">
         
        </ul>
        </section>
    </div>

    <form id="form-transacoes">
        <input type="text" id="descricao" placeholder="Descrição" required>
        <input type="number" id="valor" placeholder="valor" required>
        <input type="date" id="data" placeholder="data" required>
        <button type="submit">Adicionar Transação</button>
    </form>

    <script>

        const transacoes = [
            {
                descricao: "Salario",
                data: "15/05/2024",
                valor: 2000
            },
            {
                descricao: "mercado",
                data: "15/05/2024",
                valor: -500
            },
            {
                descricao: "cosmetico",
                data: "15/05/2024",
                valor: -150
            },
            {
                descricao: "perfumaria",
                data: "15/05/2024",
                valor: 280
            }
        ];
        
         function adicionarTransacao(descricao,valor,data) { 
            const transacao = {
                descricao: descricao,
                data: data,
                valor: valor
            };

            transacoes.push(transacao);

          const lista = document.querySelector('.history');
          const item = document.createElement('li'); 
          item.innerHTML = 
          `<span>${descricao}<br>${data}</span>
            <span class="transacao${valor < 0 ? 'Neg' : 'Pos'}">$ ${valor}</span> `;
            
            lista.appendChild(item);
    
        }  

        document.getElementById('form-transacoes').onsubmit = 
        function(event){
            event.preventDefault();
            const descricao = document.getElementById('descricao').value;
            const valor = parseFloat(document.getElementById('valor').value);
            const data = document.getElementById('data').value;

            adicionarTransacao(descricao,valor,data);

            document.getElementById('descricao').value = '';
            document.getElementById('valor').value = '';
            document.getElementById('data').value = '';
        }

      
        function calcularTotal() {
        let total = 0;
        for (const transacao of transacoes) {
        total += transacao.valor;
            }
        return total;
    }

        function atualizarValorTotal() {
        const total = calcularTotal();
        const totalElement = document.getElementById('total_val');
        totalElement.textContent = `$ ${total}`;
    }


    atualizarValorTotal();
    
    </script>
</body>
</html>